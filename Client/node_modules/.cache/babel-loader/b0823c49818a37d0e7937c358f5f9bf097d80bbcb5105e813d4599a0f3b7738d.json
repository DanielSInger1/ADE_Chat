{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Downloads/chat FInal/Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Downloads/chat FInal/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{token}from\"../Home/Home\";import{socket}from\"./chat\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function RepContact(_ref){var contact=_ref.contact,updateCount=_ref.updateCount,color=_ref.color,updateChat=_ref.updateChat;var handleClick=function handleClick(id){updateCount(contact.id);};console.log(contact.id);var time;if(contact.lastMessage==null){time=\"send your first message\";}else{time=contact.lastMessage.created;console.log(\"the time is\"+time);var date=new Date(time);var options={month:\"2-digit\",day:\"2-digit\",hour:\"2-digit\",minute:\"2-digit\"};time=date.toLocaleString(\"en-US\",options);}var lastMessage=\"\";if(contact.lastMessage!=null){lastMessage=contact.lastMessage.content;}return/*#__PURE__*/_jsx(\"li\",{className:\"p-2 border-bottom\",style:{backgroundColor:color},children:/*#__PURE__*/_jsxs(\"a\",{href:\"#!\",className:\"d-flex justify-content-between\",onClick:function onClick(){return handleClick(contact.id);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(\"img\",{src:contact.user.profilePic,alt:\"avatar\",className:\"rounded-circle d-flex align-self-center me-3 shadow-1-strong photos col-3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"fw-bold mb-0\",children:contact.user.displayName}),/*#__PURE__*/_jsx(\"p\",{className:\"fw-lighter\",id:\"lastMessage\",children:lastMessage})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-square exit\",onClick:function onClick(event){return handleButtonClick(contact.id,event,updateChat);}}),/*#__PURE__*/_jsx(\"p\",{className:\"small text-muted mb-1 \",children:time})]})]})});}function handleButtonClick(_x,_x2,_x3){return _handleButtonClick.apply(this,arguments);}function _handleButtonClick(){_handleButtonClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id,event,updateChat){var data,url,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.stopPropagation();data={id:id};_context.prev=2;url=\"http://localhost:5000/api/Chats/\".concat(id);_context.next=6;return fetch(url,{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify(data)});case 6:res=_context.sent;if(!res.ok){_context.next=14;break;}console.log(\"The user that is deleted is \"+JSON.stringify(data));socket.emit(\"chatDeleted\",id);updateChat(id);return _context.abrupt(\"return\");case 14:if(!(res.status===400)){_context.next=18;break;}return _context.abrupt(\"return\");case 18:alert(\"There is no such username in the app\");case 19:_context.next=24;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](2);console.log(\"Error:\",_context.t0);case 24:console.log(\"Hi from closing\");case 25:case\"end\":return _context.stop();}},_callee,null,[[2,21]]);}));return _handleButtonClick.apply(this,arguments);}","map":{"version":3,"names":["token","socket","jsx","_jsx","jsxs","_jsxs","RepContact","_ref","contact","updateCount","color","updateChat","handleClick","id","console","log","time","lastMessage","created","date","Date","options","month","day","hour","minute","toLocaleString","content","className","style","backgroundColor","children","href","onClick","src","user","profilePic","alt","displayName","event","handleButtonClick","_x","_x2","_x3","_handleButtonClick","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","url","res","wrap","_callee$","_context","prev","next","stopPropagation","concat","fetch","method","headers","Authorization","body","JSON","stringify","sent","ok","emit","abrupt","status","alert","t0","stop"],"sources":["C:/Users/User/Downloads/chat FInal/Client/src/Chat/RepContact.js"],"sourcesContent":["import { token } from \"../Home/Home\";\nimport { socket } from \"./chat\";\n\nexport function RepContact({ contact, updateCount,color ,updateChat}) {\n    const handleClick = (id) => {\n        updateCount(contact.id);\n    };\n    console.log(contact.id);\n    let time;\n    if(contact.lastMessage==null){\n        time=\"send your first message\";\n    }else {\n        time=contact.lastMessage.created;\n        console.log(\"the time is\"+ time);\n        const date = new Date(time);\n        const options = {\n            month: \"2-digit\",\n            day: \"2-digit\",\n            hour: \"2-digit\",\n            minute: \"2-digit\",\n        };\n        time = date.toLocaleString(\"en-US\", options);\n    }\n       let lastMessage=\"\";\n       if(contact.lastMessage!=null){\n           lastMessage=contact.lastMessage.content;\n       }\n    return (\n        <li className=\"p-2 border-bottom\" style={{ backgroundColor: color }}>\n            <a href=\"#!\" className=\"d-flex justify-content-between\" onClick={() => handleClick(contact.id)}>\n                <div className=\"d-flex flex-row\">\n                    <img\n                        src={contact.user.profilePic}\n                        alt=\"avatar\"\n                        className=\"rounded-circle d-flex align-self-center me-3 shadow-1-strong photos col-3\"\n                    />\n                    <div className=\"pt-1\">\n                        <p className=\"fw-bold mb-0\">{contact.user.displayName}</p>\n                        <p className=\"fw-lighter\" id=\"lastMessage\">{lastMessage}</p>\n                    </div>\n                </div>\n                <div className=\"pt-1\">\n                    <i className=\"bi bi-x-square exit\" onClick={(event) => handleButtonClick(contact.id, event,updateChat)}></i>\n                    <p className=\"small text-muted mb-1 \">{time}</p>\n                </div>\n            </a>\n        </li>\n    );\n}\n\n\nasync function handleButtonClick(id, event,updateChat) {\n    event.stopPropagation();\n    const data = {\n        id: id,\n    };\n\n    try {\n        const url = `http://localhost:5000/api/Chats/${id}`;\n        const res = await fetch(url, {\n            method: \"DELETE\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: `Bearer ${token}`,\n            },\n            body: JSON.stringify(data),\n        });\n\n        if (res.ok) {\n            console.log(\"The user that is deleted is \" + JSON.stringify(data));\n            socket.emit(\"chatDeleted\", id)\n            updateChat(id);\n            return;\n            // Additional processing or actions with the result\n        } else if (res.status === 400) {\n            return;\n        } else {\n            alert(\"There is no such username in the app\");\n        }\n    } catch (error) {\n        console.log(\"Error:\", error);\n    }\n\n    console.log(\"Hi from closing\");\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}